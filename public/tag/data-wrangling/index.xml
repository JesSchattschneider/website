<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>data wrangling | Jessica Leiria Schattschneider</title>
    <link>/tag/data-wrangling/</link>
      <atom:link href="/tag/data-wrangling/index.xml" rel="self" type="application/rss+xml" />
    <description>data wrangling</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-us</language>
    <image>
      <url>/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_512x512_fill_lanczos_center_2.png</url>
      <title>data wrangling</title>
      <link>/tag/data-wrangling/</link>
    </image>
    
    <item>
      <title>How to Compare Covid-19 Curves in Python</title>
      <link>/post/covid/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/post/covid/</guid>
      <description>&lt;hr&gt;
&lt;h1 id=&#34;motivation&#34;&gt;Motivation&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Work with Covid-19 dataset&lt;/li&gt;
&lt;li&gt;Compare the curve from my home country Brazil (no social distance and insufficient testing - &lt;a href=&#34;https://www.theguardian.com/world/2020/may/06/brazil-coronavirus-deaths-covid-19-bolsonaro&#34;&gt;https://www.theguardian.com/world/2020/may/06/brazil-coronavirus-deaths-covid-19-bolsonaro&lt;/a&gt;) and New Zealand (four weeks of lockdown and with a recognized elimination strategy - &lt;a href=&#34;https://edition.cnn.com/2020/04/28/asia/new-zealand-coronavirus-outbreak-elimination-intl-hnk/index.html&#34;&gt;https://edition.cnn.com/2020/04/28/asia/new-zealand-coronavirus-outbreak-elimination-intl-hnk/index.html&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;source&#34;&gt;Source:&lt;/h1&gt;
&lt;p&gt;To structure the code below two main references were used:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.dataquest.io/blog/tutorial-time-series-analysis-with-pandas/&#34;&gt;https://www.dataquest.io/blog/tutorial-time-series-analysis-with-pandas/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://opensource.com/article/20/4/python-data-covid-19&#34;&gt;https://opensource.com/article/20/4/python-data-covid-19&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;coding&#34;&gt;Coding:&lt;/h1&gt;
&lt;p&gt;Import libraries&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-python,&#34;&gt;import pycountry
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Import the dataset&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Find additional information about the dataset here: &lt;a href=&#34;https://github.com/datasets/covid-19&#34;&gt;https://github.com/datasets/covid-19&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;
URL_DATASET = r&#39;https://raw.githubusercontent.com/datasets/covid-19/master/data/countries-aggregated.csv&#39;
df1 = pd.read_csv(URL_DATASET)

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Select only the data needed and get it in the right shape to the analysis&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;## Filtering and Wrangling
df1 = df1.filter([&amp;quot;Country&amp;quot;, &amp;quot;Date&amp;quot;, &amp;quot;Confirmed&amp;quot;]) ## Select only the columns of interest
bra_nz = df1.loc[df1[&amp;quot;Country&amp;quot;].isin([&#39;Brazil&#39;,&#39;New Zealand&#39;])]  ## Select the countries to be analysed
bra_nz[&amp;quot;Date&amp;quot;] = pd.to_datetime(bra_nz[&amp;quot;Date&amp;quot;]) ## Set the right format to Date column
bra_nz=bra_nz.pivot(index=&#39;Date&#39;, columns=&#39;Country&#39;, values=&#39;Confirmed&#39;) ## Reshape the dataset
## Define columns
data_columns = [&#39;Brazil&#39;, &#39;New Zealand&#39;] 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Perform a log transformation on the number of confirmed cases and set a rolling window of seven days&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;## And index retrieveing month
## and rolling
bra_nz_7d = np.log(bra_nz[data_columns]).rolling(7, center=True).mean() ## The logarithmic scale improves the rate                                                                         ## change analysis and the rolling window                                                                          ## smooths the graph 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Plot the curves and a red vertical line indicating the first day of New Zealand lockdown&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;# Plot 7-day rolling mean time series for the confirmed cases of Brazil and New Zealand:
fig, ax = plt.subplots()
ax.plot(bra_nz_7d[&#39;Brazil&#39;], linewidth=2, label=&#39;7-d Rolling Brazil&#39;, color=&#39;green&#39;)
ax.plot(bra_nz_7d[&#39;New Zealand&#39;], linewidth=2, label=&#39;7-d Rolling New Zealand&#39;, color=&#39;blue&#39;)
ax.axvline(pd.to_datetime(&#39;2020-03-26&#39;), color=&#39;r&#39;, linestyle=&#39;--&#39;, lw=2)

# Set x-ticks to yearly interval and add legend and labels
ax.legend()
ax.set_ylabel(&#39;Confirmed Cases&#39;)
ax.set_title(&#39;Comparing Covid-19 Trends- Brazil and New Zealand&#39;);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index.png&#34; alt=&#34;png&#34;&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
  </channel>
</rss>
